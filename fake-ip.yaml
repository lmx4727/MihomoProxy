# ç«¯å£ä¸º 0 æ—¶ä¸å¯ç”¨è¯¥ä»£ç†ç«¯å£
# tproxy-port: 1234 # tproxy é€æ˜ä»£ç†ç«¯å£,å¯ä»£ç† TCP ä¸ UDP æµé‡. ä»…é™ linux(Android) é€‚ç”¨
mixed-port: 2234 # æ··åˆç«¯å£ åŒæ—¶æ”¯æŒ HTTP(S) å’Œ SOCKS5 åè®®
ipv6: true # å†…æ ¸æ¥å— IPv6 æµé‡
allow-lan: true # å…è®¸å…¶ä»–è®¾å¤‡é€šè¿‡ Clash çš„ä»£ç†ç«¯å£è®¿é—®äº’è”ç½‘
lan-allowed-ips: [127.0.0.1/32]
skip-auth-prefixes: [127.0.0.1/32]
bind-address: '*' # ç»‘å®šåœ°å€,ä»…å…è®¸å…¶ä»–è®¾å¤‡é€šè¿‡è¿™ä¸ªåœ°å€è®¿é—®
unified-delay: false # ç»Ÿä¸€å»¶è¿Ÿ,ä¼šè®¡ç®— RTT,ä»¥æ¶ˆé™¤è¿æ¥æ¡æ‰‹ç­‰å¸¦æ¥çš„ä¸åŒç±»å‹èŠ‚ç‚¹çš„å»¶è¿Ÿå·®å¼‚
tcp-concurrent: true # å¹¶å‘å‘æ‰€æœ‰ IP å‘èµ· TCP è¿æ¥,é€‰æ‹©æœ€å¿«æ¡æ‰‹æˆåŠŸçš„ç»“æœ

log-level: silent # æ—¥å¿—ç­‰çº§ debug/info/warning/error/silent
mode: rule # è¿è¡Œæ¨¡å¼ rule/global/direct,æš‚ä¸æ”¯æŒ script
# find-process-mode: off # è¿›ç¨‹åŒ¹é…
global-client-fingerprint: chrome # å…¨å±€ TLS æŒ‡çº¹,ä¼˜å…ˆä½äº proxy å†…çš„ client-fingerprint
# global-ua: "clash.meta/"  # å¤–éƒ¨èµ„æºä¸‹è½½æ—¶ä½¿ç”¨çš„çš„ UA,é»˜è®¤ä¸º clash.meta
keep-alive-interval: 30 # å‘é€ Keep-Alive æ¢æµ‹åŒ…çš„é—´éš”æ—¶é—´ å•ä½ s
keep-alive-idle: 60 # è¿æ¥ç©ºé—²å¤šä¹…åå¼€å§‹å‘é€ Keep-Alive æ¢æµ‹åŒ…
# experimental:
#   fingerprints: ['qq']

profile:
  store-selected: true # å‚¨å­˜ API å¯¹ç­–ç•¥ç»„çš„é€‰æ‹©
  store-fake-ip: true # å‚¨å­˜ fakeip æ˜ å°„è¡¨ï¼ŒåŸŸåå†æ¬¡å‘ç”Ÿè¿æ¥æ—¶ï¼Œä½¿ç”¨åŸæœ‰æ˜ å°„åœ°å€

external-controller: 127.0.0.1:9494 # API ç›‘å¬åœ°å€
external-controller-cors: # API CORS æ ‡å¤´é…ç½®
  allow-origins: # å…è®¸å“ªäº›å‰ç«¯é¡µé¢çš„åŸŸåè®¿é—® API
    - 127.0.0.1
    - https://board.zash.run.place
  allow-private-network: false
external-ui: ./ui # WebUI çš„ä¿å­˜è·¯å¾„
external-ui-url: 'https://github.com/Zephyruso/zashboard/archive/refs/heads/gh-pages.zip' # WebUI ä¸‹è½½åœ°å€
# secret: 'cat' # API çš„è®¿é—®å¯†é’¥

hosts:
  # æ”¯æŒå•åŸŸåå¤š IP,æ ¼å¼ä¸ºæ•°ç»„; æ”¯æŒåŸŸåé€šé…ç¬¦,ä¸ä½¿ç”¨é€šé…ç¬¦çš„åŸŸåä¼˜å…ˆçº§é«˜äºä½¿ç”¨é€šé…ç¬¦çš„åŸŸå
  # 'doh.pub': ['1.12.12.12','120.53.53.53','2402:4e00::']
  'trpc.o3.*': 127.0.0.1 # ç¯å¢ƒæ£€æµ‹åŒ…(trpc.o3.*)æ‹¦æˆª
  'iosapps.itunes.apple.com': iosapps.itunes.apple.com.m.alikunlun.net # æ”¹å–„ App Store ä¸‹è½½é€Ÿåº¦
  'services.googleapis.cn': services.googleapis.com # Google é‡å®šå‘
  'www.google.cn': www.google.com
  'www.g.cn': www.google.com
  'maps.google.cn': maps.google.com
  'ditu.google.cn': maps.google.com

dns:
  # ä½¿ç”¨ DoHã€DoTã€DoQ åè®®æ¯”ä¼ ç»ŸåŸºäº UDP çš„æŸ¥è¯¢æ›´æ¶ˆè€—ç³»ç»Ÿèµ„æºï¼Œä¸”å»¶è¿Ÿé€šå¸¸æ›´é«˜
  enable: true # å¦‚ä¸º false,åˆ™ä½¿ç”¨ç³»ç»Ÿ DNS è§£æ
  # listen: 0.0.0.0:53
  ipv6: true # false å°†è¿”å› AAAA çš„ç©ºç»“æœ
  respect-rules: true # dns è¿æ¥éµå®ˆè·¯ç”±è§„åˆ™,éœ€é…ç½® proxy-server-nameserver
  enhanced-mode: fake-ip # DNS å¤„ç†æ¨¡å¼ redir-host/fake-ip,Meta å›æ»šäº† Redir Host éƒ¨åˆ†ä»£ç ,ä»ç„¶ä¿ç•™ Clash v1.70 ä»¥å‰çš„ Redir Host æ¨¡å¼çš„åŸŸåä¼ é€’è¡Œä¸º
  fake-ip-range: 28.0.0.1/8
  fake-ip-filter: ['rule-set:site_private,site_fake-ip'] # æ ¹æ® fake-ip æ¨¡å¼è¿”å›å‡ IP,é»˜è®¤ blacklist æ¨¡å¼ (å³åŒ¹é…çš„ä¸è¿”å›,å…¶ä½™è¿”å›)
  # cache-algorithm: arc # ç¼“å­˜ç®—æ³•,é»˜è®¤ lru
  default-nameserver: [223.5.5.5, 119.29.29.29] # ç”¨äºè§£æå…¶å®ƒ DNS ä¸ºåŸŸåç±»å‹çš„ DNS,å¿…é¡»ä¸º IPç±»å‹,å¯ä¸ºåŠ å¯† DNS
  proxy-server-nameserver: &direct [https://dns.alidns.com/dns-query, https://doh.pub/dns-query] # ç”¨äºèŠ‚ç‚¹çš„åŸŸåè§£æ,å…¶ä»– DNS å¦‚éœ€è¿‡ä»£ç†æŸ¥è¯¢æ—¶åˆ™é…ç½®è¯¥é¡¹ä»¥é˜²å‡ºç°é¸¡è›‹é—®é¢˜
  nameserver: &proxy [https://1.0.0.1/dns-query, https://8.8.4.4/dns-query] # é»˜è®¤åŸŸåè§£æ,å¦‚ä¸é…ç½® fallback/proxy-server-nameserver,åˆ™éƒ½ç”± nameserver è§£æ
  nameserver-policy: { 'rule-set:site_private,site_cn': *direct }
  direct-nameserver: *direct # é…ç½®åç›´è¿å‡ºç«™ä¼šä½¿ç”¨å®ƒé‡æ–°è§£æ
  direct-nameserver-follow-policy: true # å¦‚æœéµå¾ª nameserver-policy åˆ™ np çš„ç›´è¿ä¸ä¼šè¢« dn é‡æ–°è§£æ,æ­¤æ—¶ dn ç”¨äºå…¶ä½™çš„ç›´è¿æœ€ç»ˆè§£æ

tun:
  enable: true
  stack: mixed # tun æ¨¡å¼å †æ ˆ system/gvisor/mixed é˜²ç«å¢™æœªæ”¾è¡Œå†…æ ¸,åˆ™æ— æ³•ä½¿ç”¨ system å’Œ mixed åè®®æ ˆ
  device: Cat # æŒ‡å®š tun ç½‘å¡åç§°,MacOS è®¾å¤‡åªèƒ½ä½¿ç”¨ utun å¼€å¤´çš„ç½‘å¡å
  strict-route: false # ä¸¥æ ¼è·¯ç”± æ‰€æœ‰è¿æ¥è·¯ç”±åˆ° tun æ¥é˜²æ­¢æ³„æ¼,ä½†è®¾å¤‡å°†æ— æ³•è¢«å…¶ä»–è®¾å¤‡è®¿é—®
  auto-route: true # è‡ªåŠ¨è®¾ç½®å…¨å±€è·¯ç”±,å¯ä»¥è‡ªåŠ¨å°†å…¨å±€æµé‡è·¯ç”±è¿›å…¥ tun ç½‘å¡
  # auto-redirect: true # ä»…æ”¯æŒ Linux,è‡ªåŠ¨é…ç½® iptables/nftables ä»¥é‡å®šå‘ TCP è¿æ¥,éœ€è¦ auto-route å·²å¯ç”¨
  auto-detect-interface: true # è‡ªåŠ¨é€‰æ‹©æµé‡å‡ºå£æ¥å£,å¤šå‡ºå£ç½‘å¡åŒæ—¶è¿æ¥çš„è®¾å¤‡å»ºè®®æ‰‹åŠ¨æŒ‡å®šå‡ºå£ç½‘å¡
  mtu: 9000 # æœ€å¤§ä¼ è¾“å•å…ƒ,ä¼šå½±å“æé™çŠ¶æ€ä¸‹çš„é€Ÿç‡
  # dns-hijack: [ 'any:53','tcp://any:53' ] # åœ¨ MacOS/Windows æ— æ³•è‡ªåŠ¨åŠ«æŒå‘å¾€å±€åŸŸç½‘çš„ dns è¯·æ±‚,åœ¨ Android å¦‚å¼€å¯ ç§äººdns åˆ™æ— æ³•è‡ªåŠ¨åŠ«æŒ dns è¯·æ±‚

listeners:
  # ä½¿ç”¨æµé‡å…¥ç«™,å¯ä»¥ä½œä¸ºæœåŠ¡ç«¯
  - { name: in_mixed, type: mixed, port: 8484, udp: true, listen: 0.0.0.0 } # ç”¨äºç›‘å¬å±€åŸŸç½‘æµé‡çš„ HTTP(S) å’Œ SOCKS ä»£ç†æ··åˆå…¥ç«™,é€‚ç”¨äºæ— åŠ å¯†ä¼ è¾“

proxies:
  # å‡ºç«™é…ç½®  dns/direct ç­‰é»˜è®¤å¼€å¯ udp
  - { name: dns-hijack, type: dns } # dns å‡ºç«™ä¼šå°†è¯·æ±‚åŠ«æŒåˆ°å†…éƒ¨ dns æ¨¡å—,æ‰€æœ‰è¯·æ±‚å‡åœ¨å†…éƒ¨å¤„ç†
  - { name: ä»¥å¤ªç½‘, type: direct, interface-name: 'ä»¥å¤ªç½‘' } # æœ‰çº¿æ¥å£
  - { name: WLAN, type: direct, interface-name: 'WLAN' } # Wi-Fiæ¥å£
  - { name: wlan0, type: direct, interface-name: 'wlan0' }
  - { name: wlan1, type: direct, interface-name: 'wlan1' }
  - { name: rmnet_data0, type: direct, interface-name: 'rmnet_data0' } # Qualcomm æ•°æ®
  - { name: rmnet_data1, type: direct, interface-name: 'rmnet_data1' }
  # - { name: ccmni0, type: direct, interface-name: 'ccmni0' } # MTK æ•°æ®
  # - { name: ccmni1, type: direct, interface-name: 'ccmni1' }
  # - { name: ap0, type: direct, interface-name: 'ap0' } # çƒ­ç‚¹
  # æŸ¥çœ‹æ¥å£å‘½ä»¤: netsh interface show interface  Tip: æ‰‹æœºéœ€è¦ root ä»¥ç»‘å®šæ¥å£

proxy-providers-anchor:
  # é”šç‚¹ å¦‚åˆå¹¶æ—¶æœ‰é‡å¤çš„é¡¹,åˆ™ä¸ä¼šå»åˆå¹¶; é”šç‚¹åå°½é‡ä¸è¦å«ç‰¹æ®Šå­—ç¬¦
  - &inline-base
    proxy: Update # ç”¨äºæ›´æ–°çš„ç­–ç•¥æˆ–å‡ºç«™
    interval: 43200 # æ›´æ–° provider çš„é—´éš”,å•ä½ s  Tip: è®¾ç½®çš„è¿‡äºå°å¯èƒ½è¢«æœºåœº ban
    # filter: '(?:ğŸ‡­ğŸ‡°|æ¸¯|(?i:\b(?:hk|hkg|hong|hongkong)\b))`(?:ğŸ‡¹ğŸ‡¼|å°|é«˜é›„|(?i:\b(?:tw|twn|tai|taiwan)\b))`(?:ğŸ‡°ğŸ‡·|éŸ©å›½|å—éŸ©|é¦–å°”|é‡œå±±|(?i:\b(?:kr|kor|korea|South\s*Korea)\b))`(?:ğŸ‡¯ğŸ‡µ|æ—¥æœ¬|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|(?i:\b(?:jp|jpn|japan)\b))`(?:ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡|ç‹®|(?i:\b(?:sg|sgp|singapore)\b))`(?:ğŸ‡ºğŸ‡¸|ç¾|å‡¤å‡°åŸ|ç¡…è°·|æ´›æ‰çŸ¶|è¥¿é›…å›¾|èŠåŠ å“¥|(?i:\b(?:us|usa|united\s*states)\b))'
    # exclude-filter: '(?:æµé‡|æœŸ|çŸ¥|å‘Š|å…¥|ç¾¤|é‚€|è¿”|å¾ªç¯|å®˜|å®¢|ç«™|å€|è·|è®¢|æœºåœº|ä¸‹æ¬¡|ç‰ˆæœ¬|å¤‡ç”¨|å·²|è”ç³»|é‚®|æœåŠ¡|å·¥å•|è´©å–|å¯¼èˆª|å€’å–|é˜²æ­¢|å›½å†…|åœ°å€|é¢‘é“|æ— æ³•|è¯´æ˜|ä½¿ç”¨|æç¤º|ç‰¹åˆ«|è®¿é—®|æ”¯æŒ|æ•™ç¨‹|å…³æ³¨|ä½œè€…|(?i:\b(?:use|used|tg|total|expire|email|panel|channel|website|author|update)\b)|\b\d{4}-\d{2}-\d{2}\b|\d+G)' # å¼•å…¥ç­›é€‰/æ’é™¤,ä½¿ç”¨ç­›é€‰å¯èƒ½ä¼šåœ¨ä¸€å®šç¨‹åº¦ä¸Šå¢åŠ CPUå ç”¨/è½¬å‘å»¶è¿Ÿ,å°¤å…¶æ˜¯ä½¿ç”¨è¾ƒä¸ºå¤æ‚æ­£åˆ™çš„æƒ…å†µä¸‹
    exclude-type: 'direct' # æ’é™¤åŒ¹é… type çš„èŠ‚ç‚¹,ç”¨ | åˆ†éš”
    health-check: { enable: true, url: 'https://connectivitycheck.android.com/generate_204', interval: 90, timeout: 3500, expected-status: 204 } # å»¶è¿Ÿæ£€æµ‹
    header: { User-Agent: ['mihomo/9.99.9 clash.meta/9.99.9 ClashMeta/9.99.9 FlClash/9.99.9 clash-verge/9.99.9'] } # è‡ªå®šä¹‰ HTTP è¯·æ±‚å¤´
  - &override { udp: true } # è¦†å†™èŠ‚ç‚¹å†…å®¹
  # - &override-proxy-name # å¯¹èŠ‚ç‚¹åç§°å†…å®¹è¿›è¡Œæ›¿æ¢
  #   proxy-name:
  #     - pattern: '\s*[\x{1F1E6}-\x{1F1FF}]{2}\s*'
  #       target: ''
  #     - pattern: '\s*\|\s*'
  #       target: '-'

proxy-providers:
  # åˆæ³•çš„è¿œç¨‹ä»£ç†é›†é‡Œå¿…é¡»åŒ…å« proxies å­—æ®µ,è¿œç¨‹ä»£ç†é›†ä¸ºç©ºæ—¶ä¼šä»¥ DIRECT æ›¿ä»£
  Provider_1:
    type: http # å¿…é¡»,provider ç±»å‹ http/file
    path: ./proxy_providers/Provider_1.yaml # provider çš„ä¿å­˜è·¯å¾„
    url: 'http://127.0.0.1:38324/download/1' # å¼•å·å†…æ›´æ”¹æœºåœºé“¾æ¥
    <<: *inline-base
    override: { <<: *override, additional-prefix: 'A-' }
  Provider_2:
    type: http
    path: ./proxy_providers/Provider_2.yaml
    url: 'http://127.0.0.1:38324/download/2' # å¼•å·å†…æ›´æ”¹æœºåœºé“¾æ¥
    <<: *inline-base
    override: { <<: *override, additional-prefix: 'B-' }
  Provider_3:
    type: http
    path: ./proxy_providers/Provider_3.yaml
    url: 'http://127.0.0.1:38324/download/3' # å¼•å·å†…æ›´æ”¹æœºåœºé“¾æ¥
    <<: *inline-base
    override: { <<: *override, additional-prefix: 'C-' }
  Provider_4:
    type: http
    path: ./proxy_providers/Provider_4.yaml
    url: 'http://127.0.0.1:38324/download/4' # å¼•å·å†…æ›´æ”¹æœºåœºé“¾æ¥
    <<: *inline-base
    override: { <<: *override, additional-prefix: 'D-' }

# =============================================================================
# ä»£ç†æä¾›è€…ï¼ˆè®¢é˜…ï¼‰
# =============================================================================
proxy-providers-anchor:
- health_check: &health_check { health-check: { enable: true, url: 'https://www.google.com/generate_204', expected-status: '204', interval: 180 } }
- header: &header { header: { User-Agent: [ 'clash.meta/9.99.9', 'ClashMeta/9.99.9', 'clash-verge/9.99.9' ] } }
- update: &update { proxy: 'Update', interval: 21600 }
- filter_exclude_ad: &filter_exclude_ad { exclude-filter: '(?:æµé‡|æœŸ|çŸ¥|å‘Š|ç¾¤|é‚€|è¿”|å¾ªç¯|å®˜|å®¢|ç«™|å€|è·|è®¢|æœºåœº|ä¸‹æ¬¡|ç‰ˆæœ¬|å¤‡ç”¨|å·²|è”ç³»|é‚®|æœåŠ¡|å·¥å•|è´©å–|å¯¼èˆª|å€’å–|é˜²æ­¢|å›½å†…|åœ°å€|é¢‘é“|æ— æ³•|è¯´æ˜|ä½¿ç”¨|æç¤º|ç‰¹åˆ«|è®¿é—®|æ”¯æŒ|æ•™ç¨‹|å…³æ³¨|ä½œè€…|(?i:\b(?:USE|USED|TG|TOTAL|EXPIRE|EMAIL|PANEL|CHANNEL|AUTHOR|UPDATE)\b)|\b\d{4}-\d{2}-\d{2}\b|\d+G)' }
- override: &override { udp: true }

proxy-providers:
  Provider_1:
    type: http # å¿…é¡», provider ç±»å‹ http/file
    url: 'http://127.0.0.1:38324/download/1' # æœºåœºé“¾æ¥
    path: './proxy_providers/Provider_1.yaml' # é…ç½®ä¿å­˜ä½ç½® '.'ä»£è¡¨å½“å‰ç›®å½•,'..'ä»£è¡¨ä¸Šçº§ç›®å½•
    <<: [ *health_check, *header, *update, *filter_exclude_ad ]
    override: { <<: *override, additional-prefix: 'A [ ', additional-suffix: ' ]' }

  Provider_2:
    type: http
    url: 'http://127.0.0.1:38324/download/2' # æœºåœºé“¾æ¥
    path: './proxy_providers/Provider_2.yaml'
    <<: [ *health_check, *header, *update, *filter_exclude_ad ]
    override: { <<: *override, additional-prefix: 'B [ ', additional-suffix: ' ]' }

  Provider_3:
    type: http
    url: 'http://127.0.0.1:38324/download/3' # æœºåœºé“¾æ¥
    path: './proxy_providers/Provider_3.yaml'
    <<: [ *health_check, *header, *update, *filter_exclude_ad ]
    override: { <<: *override, additional-prefix: 'C [ ', additional-suffix: ' ]' }

  Provider_4:
    type: http
    url: 'http://127.0.0.1:38324/download/4' # æœºåœºé“¾æ¥
    path: './proxy_providers/Provider_4.yaml'
    <<: [ *health_check, *header, *update, *filter_exclude_ad ]
    override: { <<: *override, additional-prefix: 'D [ ', additional-suffix: ' ]' }

# =============================================================================
# ä»£ç†ç»„é”šç‚¹ï¼ˆç”¨äºå…¬å…±è§„åˆ™å’Œè¿‡æ»¤ï¼‰
# =============================================================================
proxy-groups-anchor:
- exclude_eb: &exclude_eb { exclude-filter: 'å›å›½|æ ¡å›­' }
- filter_hk: &filter_hk { filter: '(?:ğŸ‡­ğŸ‡°|æ¸¯|(?i:\b(?:hk|hkg|hong|hongkong)\b))' }
- filter_tw: &filter_tw { filter: '(?:ğŸ‡¹ğŸ‡¼|å°|é«˜é›„|(?i:\b(?:tw|twn|tai|taiwan)\b))' }
- filter_jp: &filter_jp { filter: '(?:ğŸ‡¯ğŸ‡µ|æ—¥æœ¬|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|(?i:\b(?:jp|jpn|japan)\b))' }
- filter_sg: &filter_sg { filter: '(?:ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡|ç‹®|(?i:\b(?:sg|sgp|singapore)\b))' }
- filter_kr: &filter_kr { filter: '(?:KR|éŸ©|éŸ©å›½|é¦–å°”|(?i:\b(?:kr|korea|RepublicofKorea|seoul)\b))' }
- filter_us: &filter_us { filter: '(?:ğŸ‡ºğŸ‡¸|ç¾|å‡¤å‡°åŸ|ç¡…è°·|æ´›æ‰çŸ¶|è¥¿é›…å›¾|èŠåŠ å“¥|(?i:\b(?:us|usa|united\s*states)\b))' }
- filter_gb: &filter_gb { filter: '(?:ğŸ‡¬ğŸ‡§|è‹±|ä¼¦æ•¦|æ›¼å½»æ–¯ç‰¹|(?i:\b(?:uk|gb|gbr|united\s*kingdom|britain)\b))' }
- filter_de: &filter_de { filter: '(?:DE|å¾·å›½|å¾·æ„å¿—|æŸæ—|æ…•å°¼é»‘|(?i:\b(?:de|ger|germany|berlin|munich)\b))' }
- filter_lu: &filter_lu { filter: '(?:ğŸ‡±ğŸ‡º|å¢æ£®å ¡|(?i:\b(?:lu|lux|luxembourg|bt|pt)\b))' }
- proxies_default: &proxies_default { expected-status: '204', proxies: [ PASS, Proxy, Local, é¦™æ¸¯, å°æ¹¾, ç¾å›½, è‹±å›½, æ—¥æœ¬, éŸ©å›½, å¾·å›½, ç‹®åŸ ] }
- proxies_direct: &proxies_direct { expected-status: '204', proxies: [ Local, Proxy, PASS, é¦™æ¸¯, å°æ¹¾, ç¾å›½, è‹±å›½, æ—¥æœ¬, éŸ©å›½, å¾·å›½, ç‹®åŸ ] }
- proxies_proxy: &proxies_proxy { expected-status: '204', proxies: [ Proxy, Local, PASS, é¦™æ¸¯, å°æ¹¾, ç¾å›½, è‹±å›½, æ—¥æœ¬, éŸ©å›½, å¾·å›½, ç‹®åŸ ] }
- proxies_out: &proxies_out { expected-status: '204', proxies: [ é¦™æ¸¯, å°æ¹¾, ç¾å›½, è‹±å›½, æ—¥æœ¬, éŸ©å›½, å¾·å›½, ç‹®åŸ ] }
- ut: &ut { type: url-test, url: 'https://www.google.com/generate_204', expected-status: '204', max-failed-times: 3, tolerance: 20, interval: 180 }
- lb-rr: &lb-rr { type: load-balance, strategy: round-robin, url: 'https://www.google.com/generate_204', expected-status: '204', max-failed-times: 3, interval: 180 }

# =============================================================================
# ä»£ç†ç»„ï¼ˆå–æ¶ˆ Fallback æœºåˆ¶ï¼Œç›´æ¥ä½¿ç”¨å„èŠ‚ç‚¹ç»„ï¼‰
# =============================================================================
proxy-groups:
- name: 'Proxy'
  type: select
  # æ³¨æ„ï¼šå·²ç§»é™¤ Fallbackï¼Œç›´æ¥åˆ—å‡ºå„ç­–ç•¥ç»„
  proxies: [ Local, é¦™æ¸¯, å°æ¹¾, ç¾å›½, è‹±å›½, æ—¥æœ¬, éŸ©å›½, å¾·å›½, ç‹®åŸ ]
  icon: 'https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Final.png'

- name: 'Local'
  type: select
  url: 'https://www.qualcomm.cn/generate_204'
  proxies: [ DIRECT, ä»¥å¤ªç½‘ + WLAN, wlan0 + wlan1, data0 + wlan0, data0 + wlan1, data1 + wlan0, data1 + wlan1, data2 + wlan0, data2 + wlan1, data3 + wlan0, data3 + wlan1 ]
  icon: 'https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/China_Map.png'

- name: 'Google'
  type: select
  <<: [ *proxies_proxy ]
  icon: 'https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Google_Search.png'

- name: 'TeleGram'
  type: select
  <<: [ *proxies_proxy ]
  icon: 'https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Telegram.png'

- name: 'Github'
  type: select
  <<: [ *proxies_proxy ]
  icon: 'https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/GitHub.png'

- name: 'YouTube'
  type: url-test
  use:
    - 'Provider_1'  # å¼•ç”¨ Provider_1 çš„æ‰€æœ‰èŠ‚ç‚¹
  interval: 1800
  tolerance: 50
  icon: 'https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/YouTube.png'

- name: 'Chatgpt'
  type: select
  <<: [ *ut, *filter_us ]
  include-all-providers: true
  icon: 'https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/ChatGPT.png'

- name: 'Claude'
  type: select
  <<: [ *proxies_proxy ]
  icon: 'http://47.237.17.180:8080/i/2025/02/08/x32wvb.png'

- name: 'DeepSeek'
  type: select
  <<: [ *proxies_default ]
  icon: 'http://47.237.17.180:8080/i/2025/02/09/nzxjo2.png'

- name: 'Bilibili'
  type: select
  <<: [ *proxies_default ]
  icon: 'https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/bilibili.png'

- name: 'Emby'
  type: select
  <<: [ *proxies_default ]
  icon: 'https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Emby.png'

- name: 'OneDrive'
  type: select
  <<: [ *proxies_direct ]
  icon: 'https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/OneDrive.png'

- name: 'Download'
  type: select
  <<: [ *proxies_default, *filter_lu ]
  include-all-providers: true
  icon: 'https://testingcf.jsdelivr.net/gh/filecxx/FileCentipede@master/style/images/logo.png'

- name: 'VirtLoc'
  type: select
  proxies: [ Local, Proxy, PASS, é¦™æ¸¯, å°æ¹¾, ç¾å›½, è‹±å›½, æ—¥æœ¬, éŸ©å›½, å¾·å›½, ç‹®åŸ ]
  icon: 'https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Domestic.png'

- name: 'Message'
  type: select
  <<: [ *proxies_direct ]
  icon: 'https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Google_Search.png'

- name: 'Platform'
  type: select
  proxies: [ Local, Proxy, PASS ]
  icon: 'https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Game.png'

- name: 'WebRTC'
  type: select
  proxies: [ REJECT, REJECT-DROP, PASS ]
  icon: 'https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Area.png'

- name: 'Advert'
  type: select
  proxies: [ REJECT, REJECT-DROP, PASS ]
  icon: 'https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Advertising.png'

- name: 'Update'
  type: select
  proxies: [ Local, Proxy ]
  icon: 'https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Stack.png'

- name: 'é¦™æ¸¯'
  type: select
  <<: [ *ut, *filter_hk ]
  include-all-providers: true
  icon: 'https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Hong_Kong.png'

- name: 'å°æ¹¾'
  type: select
  <<: [ *ut, *filter_tw ]
  include-all-providers: true
  icon: 'https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Taiwan.png'

- name: 'ç¾å›½'
  type: select
  <<: [ *ut, *filter_us ]
  include-all-providers: true
  icon: 'https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/United_States.png'

- name: 'è‹±å›½'
  type: select
  <<: [ *ut, *filter_gb ]
  include-all-providers: true
  icon: 'https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/United_Kingdom.png'

- name: 'æ—¥æœ¬'
  type: select
  <<: [ *ut, *filter_jp ]
  include-all-providers: true
  icon: 'https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Japan.png'

- name: 'éŸ©å›½'
  type: select
  <<: [ *ut, *filter_kr ]
  include-all-providers: true
  icon: 'https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Korea.png'

- name: 'å¾·å›½'
  type: select
  <<: [ *ut, *filter_de ]
  include-all-providers: true
  icon: 'https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Germany.png'

- name: 'ç‹®åŸ'
  type: select
  <<: [ *ut, *filter_sg ]
  include-all-providers: true
  icon: 'https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Singapore.png'





# ä»¥ä¸‹ä¸ºç‰©ç†ç½‘å¡ç»„åˆï¼ˆå¦‚æœ‰éœ€è¦ï¼‰
- name: 'ä»¥å¤ªç½‘ + WLAN'

  <<: *lb-rr
  proxies: [ ä»¥å¤ªç½‘, WLAN ]
  hidden: true
- name: 'wlan0 + wlan1'
  <<: *lb-rr
  proxies: [ wlan0, wlan1 ]
  hidden: true
- name: 'data0 + wlan0'
  <<: *lb-rr
  proxies: [ rmnet_data0, wlan0 ]
  hidden: true
- name: 'data0 + wlan1'
  <<: *lb-rr
  proxies: [ rmnet_data0, wlan1 ]
  hidden: true
- name: 'data1 + wlan0'
  <<: *lb-rr
  proxies: [ rmnet_data1, wlan0 ]
  hidden: true
- name: 'data1 + wlan1'
  <<: *lb-rr
  proxies: [ rmnet_data1, wlan1 ]
  hidden: true
- name: 'data2 + wlan0'
  <<: *lb-rr
  proxies: [ rmnet_data2, wlan0 ]
  hidden: true
- name: 'data2 + wlan1'
  <<: *lb-rr
  proxies: [ rmnet_data2, wlan1 ]
  hidden: true
- name: 'data3 + wlan0'
  <<: *lb-rr
  proxies: [ rmnet_data3, wlan0 ]
  hidden: true
- name: 'data3 + wlan1'
  <<: *lb-rr
  proxies: [ rmnet_data3, wlan1 ]
  hidden: true

# =============================================================================
# è§„åˆ™æä¾›å™¨ï¼ˆè¿œç¨‹è§„åˆ™ï¼‰
# =============================================================================
rule-providers-anchor:
  rule_domain: &rule_domain { type: http, behavior: domain, format: mrs, proxy: 'Update', interval: 86400 }
  rule_domain2: &rule_domain2 { type: http, behavior: domain, format: yaml, proxy: 'Update', interval: 86400 }
  rule_domain3: &rule_domain3 { type: http, behavior: domain, format: text, proxy: 'Update', interval: 86400 }
  rule_ipcidr: &rule_ipcidr { type: http, behavior: ipcidr, format: mrs, proxy: 'Update', interval: 86400 }
  rule_ipcidr2: &rule_ipcidr2 { type: http, behavior: classical, format: text, proxy: 'Update', interval: 86400 }
  rule_asn: &rule_asn { type: http, behavior: ipcidr, format: mrs, proxy: 'Update', interval: 86400 }
  rule_classical: &rule_classical { type: http, behavior: classical, format: yaml, proxy: 'Update', interval: 86400 }
  rule_classical2: &rule_classical2 { type: http, behavior: classical, format: text, proxy: 'Update', interval: 86400 }

rule-providers:
  site_category-ads-all: { <<: *rule_domain, path: './rule_providers/domain/category-ads-all', url: 'https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/category-ads-all.mrs' }
  site_category-httpdns-cn: { <<: *rule_domain, path: './rule_providers/domain/category-httpdns-cn', url: 'https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/category-httpdns-cn.mrs' }
  site_private: { <<: *rule_domain, path: './rule_providers/domain/private', url: 'https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/private.mrs' }
  site_googlefcm: { <<: *rule_domain, path: './rule_providers/domain/googlefcm', url: 'https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/googlefcm.mrs' }
  site_wechat: { <<: *rule_domain, path: './rule_providers/domain/wechat', url: 'https://testingcf.jsdelivr.net/gh/yiteei/Clash@Meta/rules/wechat.mrs' }
  site_category-games@cn: { <<: *rule_domain, path: './rule_providers/domain/category-games@cn', url: 'https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/category-games@cn.mrs' }
  site_virtual-location: { <<: *rule_domain, path: './rule_providers/domain/virtual-location', url: 'https://testingcf.jsdelivr.net/gh/yiteei/Clash@Meta/rules/virtual-location.mrs' }
  site_bilibili: { <<: *rule_domain, path: './rule_providers/domain/bilibili', url: 'https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/bilibili.mrs' }
  site_telegram: { <<: *rule_domain, path: './rule_providers/domain/telegram', url: 'https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/telegram.mrs' }
  site_youtube: { <<: *rule_domain, path: './rule_providers/domain/youtube', url: 'https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/youtube.mrs' }
  site_gemini: { <<: *rule_domain, path: './rule_providers/domain/gemini', url: 'https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/google-gemini.mrs' }
  site_onedrive: { <<: *rule_domain, path: './rule_providers/domain/onedrive', url: 'https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/onedrive.mrs' }
  site_gfw: { <<: *rule_domain, path: './rule_providers/domain/gfw', url: 'https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/gfw.mrs' }
  site_geolocation-!cn: { <<: *rule_domain, path: './rule_providers/domain/geolocation-!cn', url: 'https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/geolocation-!cn.mrs' }
  site_cn: { <<: *rule_domain, path: './rule_providers/domain/cn', url: 'https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/cn.mrs' }

  ip_private: { <<: *rule_ipcidr, path: './rule_providers/ipcidr/private', url: 'https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geoip/private.mrs' }
  ip_telegram: { <<: *rule_ipcidr, path: './rule_providers/ipcidr/telegram', url: 'https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geoip/telegram.mrs' }
  ip_cn: { <<: *rule_ipcidr, path: './rule_providers/ipcidr/cn', url: 'https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geoip/cn.mrs' }
  chinaip: { <<: *rule_ipcidr2, path: './rule_providers/ipcidr2/ChinaIp', url: 'https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/ChinaIp.list' }

  BanAd: { <<: *rule_classical2,  path: './rule_providers/classical2/BanAd', url: 'https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/BanAD.list'}
  BanProgramAD: { <<: *rule_classical2,  path: './rule_providers/classical2/BanProgramAD', url: 'https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/BanProgramAD.list'}
  qiufeng: { <<: *rule_domain2,  path: './rule_providers/domain2/AWAvenue-Ads-Rule-Clash', url: 'https://testingcf.jsdelivr.net/gh/TG-Twilight/AWAvenue-Ads-Rule@main/Filters/AWAvenue-Ads-Rule-Clash.yaml'}
  antiad: { <<: *rule_domain,  path: './rule_providers/domain/mihomo', url: 'https://anti-ad.net/mihomo.mrs'}
  dns-blocklists: { <<: *rule_domain3,  path: './rule_providers/domain/light', url: 'https://testingcf.jsdelivr.net/gh/hagezi/dns-blocklists@main/domains/light.txt'}

sub-rules: null

# =============================================================================
# åˆ†æµè§„åˆ™
# =============================================================================
rules:
- 'DST-PORT,53,dns-hijack'
- 'OR,((RULE-SET,site_category-httpdns-cn),(DOMAIN-REGEX,(?i)httpdns|httpsdns)),REJECT'
- 'OR,((RULE-SET,site_private),(RULE-SET,ip_private,no-resolve)),Local'
- 'RULE-SET,site_category-ads-all,Advert'
- 'RULE-SET,BanAd,Advert'
- 'RULE-SET,BanProgramAD,Advert'
- 'RULE-SET,qiufeng,Advert'
- 'RULE-SET,antiad,Advert'
- 'RULE-SET,dns-blocklists,Advert'
- 'AND,((NETWORK,udp),(DOMAIN-REGEX,(?i)stun|turn)),WebRTC'
- 'AND,((DST-PORT,5228-5230),(RULE-SET,site_googlefcm)),Message'
- 'AND,((DOMAIN-KEYWORD,bili),(DOMAIN-REGEX,(?i)pcdn|mcdn)),REJECT'
- 'RULE-SET,site_virtual-location,VirtLoc'
- 'RULE-SET,site_wechat,Proxy'
- 'DOMAIN-KEYWORD,deepseek,DeepSeek'
- 'OR,((RULE-SET,site_category-games@cn),(RULE-SET,site_category-games@cn)),Platform'
- 'OR,((RULE-SET,site_telegram),(RULE-SET,ip_telegram)),TeleGram'
- 'RULE-SET,site_youtube,YouTube'
- 'RULE-SET,site_bilibili,Bilibili'
- 'PROCESS-NAME-REGEX,(?i)emby|tsukimi,Emby'
- 'PROCESS-NAME-REGEX,(?i)femor,Emby'
- 'RULE-SET,site_onedrive,OneDrive'
- 'DOMAIN-SUFFIX,telegram.org,TeleGram'
- 'DOMAIN-SUFFIX,t.me,TeleGram'
- 'DOMAIN-KEYWORD,telegram,TeleGram'
- 'DOMAIN-KEYWORD,581658.best,Emby'
- 'DOMAIN-KEYWORD,tanhuatv.site,Emby'
- 'PROCESS-NAME-REGEX,(?i)fileu|filec,Download'
- 'DOMAIN-SUFFIX,openai.com,Chatgpt'
- 'DOMAIN-SUFFIX,chatgpt.com,Chatgpt'
- 'DOMAIN-SUFFIX,google.com,Google'
- 'DOMAIN-SUFFIX,github.com,Github'
- 'DOMAIN-SUFFIX,claude.ai,Claude'
- 'DOMAIN-SUFFIX,anthropic.com,Claude'
- 'OR,((RULE-SET,site_gfw),(RULE-SET,site_geolocation-!cn)),Proxy'
- 'RULE-SET,chinaip,Local'
- 'OR,((RULE-SET,site_cn),(RULE-SET,ip_cn)),Local'
- 'MATCH,Proxy'
